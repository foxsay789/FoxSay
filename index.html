
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <title>å°çº¢ä¹¦é£æ ¼æ±Ÿæµ™æ²ªé«˜ç²¾åº¦åœ°å›¾</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        .amap-marker-label {
            border: none;
            background-color: transparent;
        }
    </style>
    <script type="text/javascript" src="https://webapi.amap.com/maps?v=2.0&key=48a04284f106bb75500387301fa56eda"></script>
</head>
<body class="bg-gray-100">
    <div id="container" class="w-full h-screen"></div>
    <div id="panel" class="absolute top-4 left-4 z-50 bg-white rounded-lg shadow-lg p-4 w-64 fade-in text-sm">
        <h2 class="text-lg font-bold mb-4 text-pink-600">æ·»åŠ æ ‡è®°</h2>
        <select id="markerTypeSelect" class="w-full p-2 mb-4 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500">
            <option value="camping">â›º éœ²è¥</option>
            <option value="boating">ğŸš£ åˆ’èˆ¹</option>
            <option value="adventure">ğŸ§— æ¢é™©</option>
            <option value="hiking">ğŸ¥¾ å¾’æ­¥</option>
            <option value="fishing">ğŸ£ é’“é±¼</option>
        </select>
        <button id="addMarker" class="w-full bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded-md transition duration-300 ease-in-out mb-2">
            æ·»åŠ æ ‡è®°
        </button>
        <button id="clearMarkers" class="w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-md transition duration-300 ease-in-out">
            æ¸…é™¤æ‰€æœ‰æ ‡è®°
        </button>
    </div>
    <script>
        var map = new AMap.Map('container', {
            zoom: 7,
            center: [120.5, 30.5],
            viewMode: '3D'
        });

        var satelliteLayer = new AMap.TileLayer.Satellite();
        map.add(satelliteLayer);

        var districtCodes = ['310000', '320000', '330000'];

        AMap.plugin('AMap.DistrictSearch', function() {
            var districtSearch = new AMap.DistrictSearch({
                level: 'province',
                subdistrict: 0
            });

            districtCodes.forEach(function(code) {
                districtSearch.search(code, function(status, result) {
                    if (status === 'complete') {
                        var bounds = result.districtList[0].boundaries;
                        var polygon = new AMap.Polygon({
                            path: bounds,
                            strokeColor: '#FF69B4',
                            strokeWeight: 2,
                            strokeOpacity: 0.2,
                            fillOpacity: 0.1,
                            fillColor: '#FFC0CB',
                            zIndex: 50,
                        });
                        map.add(polygon);
                    }
                });
            });
        });

        AMap.plugin('AMap.Scale', function() {
            var scale = new AMap.Scale();
            map.addControl(scale);
        });

        AMap.plugin('AMap.ToolBar', function() {
            var toolBar = new AMap.ToolBar();
            map.addControl(toolBar);
        });

        var markers = [];
        var addMarkerMode = false;

        var markerEmojis = {
            camping: 'â›º',
            boating: 'ğŸš£',
            adventure: 'ğŸ§—',
            hiking: 'ğŸ¥¾',
            fishing: 'ğŸ£'
        };

        document.getElementById('addMarker').onclick = function() {
            addMarkerMode = !addMarkerMode;
            this.innerHTML = addMarkerMode ? 'ç‚¹å‡»åœ°å›¾æ·»åŠ ' : 'æ·»åŠ æ ‡è®°';
            this.classList.toggle('bg-pink-500');
            this.classList.toggle('bg-green-500');
        };

        document.getElementById('clearMarkers').onclick = function() {
            markers.forEach(marker => marker.remove());
            markers = [];
        };

        map.on('click', function(e) {
            if (addMarkerMode) {
                var markerType = document.getElementById('markerTypeSelect').value;
                var marker = new AMap.Marker({
                    position: e.lnglat,
                    draggable: true,
                    cursor: 'move',
                    label: {
                        content: markerEmojis[markerType],
                        direction: 'top',
                        offset: new AMap.Pixel(0, 0),
                        style: {
                            fontSize: '24px',
                            fontWeight: 'bold',
                            padding: '4px 8px',
                            backgroundColor: 'transparent'
                        }
                    }
                });

                marker.setMap(map);
                markers.push(marker);

                var infoWindow = new AMap.InfoWindow({
                    content: `<div class="p-2">
                        <p class="font-bold text-pink-600">${document.getElementById('markerTypeSelect').options[document.getElementById('markerTypeSelect').selectedIndex].text}</p>
                        <p class="text-gray-600">${e.lnglat.toString()}</p>
                    </div>`,
                    offset: new AMap.Pixel(0, -30)
                });

                marker.on('click', function() {
                    infoWindow.open(map, marker.getPosition());
                });

                addMarkerMode = false;
                document.getElementById('addMarker').innerHTML = 'æ·»åŠ æ ‡è®°';
                document.getElementById('addMarker').classList.remove('bg-green-500');
                document.getElementById('addMarker').classList.add('bg-pink-500');
            }
        });
    </script>
</body>
</html>
