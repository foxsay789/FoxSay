
<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>五大人格特质检测</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@3.2.31/dist/vue.global.prod.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-100 font-sans">
    <div id="app" class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold text-center mb-8">五大人格特质检测</h1>
        
        <div v-if="currentStep === 'intro'" class="max-w-2xl mx-auto">
            <p class="mb-4">欢迎参加五大人格特质检测。这个测试将帮助您了解自己的性格特点。测试包含25个问题，每个问题都有5个选项。请选择最符合您的选项。</p>
            <button @click="startTest" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">开始测试</button>
        </div>

        <div v-if="currentStep === 'test'" class="max-w-2xl mx-auto">
            <h2 class="text-xl font-semibold mb-4">问题 {{ currentQuestion + 1 }} / {{ questions.length }}</h2>
            <p class="mb-4">{{ questions[currentQuestion].text }}</p>
            <div class="space-y-2">
                <label v-for="(option, index) in questions[currentQuestion].options" :key="index" class="flex items-center">
                    <input type="radio" :value="index" v-model="answers[currentQuestion]" class="mr-2">
                    <span>{{ option }}</span>
                </label>
            </div>
            <div class="mt-4 flex justify-between">
                <button @click="prevQuestion" :disabled="currentQuestion === 0" class="bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400 disabled:opacity-50">上一题</button>
                <button v-if="currentQuestion < questions.length - 1" @click="nextQuestion" :disabled="answers[currentQuestion] === null" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:opacity-50">下一题</button>
                <button v-else @click="finishTest" :disabled="answers[currentQuestion] === null" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 disabled:opacity-50">完成测试</button>
            </div>
        </div>

        <div v-if="currentStep === 'results'" class="max-w-2xl mx-auto">
            <h2 class="text-2xl font-semibold mb-4">您的测试结果</h2>
            <canvas id="resultsChart" width="400" height="200"></canvas>
            <div class="mt-8 space-y-4">
                <div v-for="(score, trait) in results" :key="trait" class="bg-white p-4 rounded shadow">
                    <h3 class="text-lg font-semibold mb-2">{{ traitNames[trait] }}：{{ score }}分</h3>
                    <p>{{ traitDescriptions[trait] }}</p>
                </div>
            </div>
            <button @click="restartTest" class="mt-8 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">重新开始测试</button>
        </div>
    </div>

    <script>
        const { createApp, ref, computed, onMounted, watch } = Vue

        createApp({
            setup() {
                const currentStep = ref('intro')
                const currentQuestion = ref(0)
                const answers = ref(Array(25).fill(null))
                const results = ref({})

                const questions = [
                    { text: "我经常有新的想法。", trait: "O" },
                    { text: "我总是为任务做好准备。", trait: "C" },
                    { text: "我喜欢成为注意力的焦点。", trait: "E" },
                    { text: "我同情他人的感受。", trait: "A" },
                    { text: "我很容易感到紧张。", trait: "N" },
                    { text: "我对抽象的想法感兴趣。", trait: "O" },
                    { text: "我按计划行事。", trait: "C" },
                    { text: "我在社交场合感到自在。", trait: "E" },
                    { text: "我尊重他人。", trait: "A" },
                    { text: "我经常感到忧郁。", trait: "N" },
                    { text: "我有丰富的想象力。", trait: "O" },
                    { text: "我注重细节。", trait: "C" },
                    { text: "我喜欢开始对话。", trait: "E" },
                    { text: "我为他人着想。", trait: "A" },
                    { text: "我容易受到压力。", trait: "N" },
                    { text: "我喜欢尝试新事物。", trait: "O" },
                    { text: "我是一个有条理的人。", trait: "C" },
                    { text: "我喜欢与人交往。", trait: "E" },
                    { text: "我乐于帮助他人。", trait: "A" },
                    { text: "我经常担心事情。", trait: "N" },
                    { text: "我对许多事情都感兴趣。", trait: "O" },
                    { text: "我是一个可靠的人。", trait: "C" },
                    { text: "我善于交朋友。", trait: "E" },
                    { text: "我相信人性本善。", trait: "A" },
                    { text: "我容易感到沮丧。", trait: "N" }
                ]

                questions.forEach(q => {
                    q.options = ["非常不同意", "比较不同意", "中立", "比较同意", "非常同意"]
                })

                const traitNames = {
                    O: "开放性",
                    C: "尽责性",
                    E: "外向性",
                    A: "宜人性",
                    N: "神经质"
                }

                const traitDescriptions = {
                    O: "开放性高分表示您富有想象力、好奇心强，喜欢尝试新事物。低分则表示您更倾向于传统和熟悉的事物。",
                    C: "尽责性高分表示您有组织、可靠、自律。低分则可能表示您比较随性、灵活。",
                    E: "外向性高分表示您喜欢社交、活跃、热情。低分则表示您更喜欢独处、安静。",
                    A: "宜人性高分表示您富有同情心、友好、乐于合作。低分则可能表示您更直接、竞争性强。",
                    N: "神经质高分表示您容易感到焦虑、情绪波动大。低分则表示您更稳定、冷静。"
                }

                const startTest = () => {
                    currentStep.value = 'test'
                }

                const nextQuestion = () => {
                    if (currentQuestion.value < questions.length - 1) {
                        currentQuestion.value++
                    }
                }

                const prevQuestion = () => {
                    if (currentQuestion.value > 0) {
                        currentQuestion.value--
                    }
                }

                const finishTest = () => {
                    calculateResults()
                    currentStep.value = 'results'
                }

                const calculateResults = () => {
                    const traits = { O: 0, C: 0, E: 0, A: 0, N: 0 }
                    questions.forEach((q, i) => {
                        traits[q.trait] += answers.value[i] + 1
                    })
                    for (let trait in traits) {
                        traits[trait] = Math.round(traits[trait] / 5 * 100) / 100
                    }
                    results.value = traits
                }

                const restartTest = () => {
                    currentStep.value = 'intro'
                    currentQuestion.value = 0
                    answers.value = Array(25).fill(null)
                    results.value = {}
                }

                watch(() => currentStep.value, (newStep) => {
                    if (newStep === 'results') {
                        setTimeout(() => {
                            const ctx = document.getElementById('resultsChart').getContext('2d')
                            new Chart(ctx, {
                                type: 'radar',
                                data: {
                                    labels: Object.values(traitNames),
                                    datasets: [{
                                        label: '您的得分',
                                        data: Object.values(results.value),
                                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                                        borderColor: 'rgb(54, 162, 235)',
                                        pointBackgroundColor: 'rgb(54, 162, 235)',
                                        pointBorderColor: '#fff',
                                        pointHoverBackgroundColor: '#fff',
                                        pointHoverBorderColor: 'rgb(54, 162, 235)'
                                    }]
                                },
                                options: {
                                    elements: {
                                        line: {
                                            borderWidth: 3
                                        }
                                    },
                                    scales: {
                                        r: {
                                            angleLines: {
                                                display: false
                                            },
                                            suggestedMin: 0,
                                            suggestedMax: 5
                                        }
                                    }
                                }
                            })
                        }, 0)
                    }
                })

                return {
                    currentStep,
                    currentQuestion,
                    questions,
                    answers,
                    results,
                    traitNames,
                    traitDescriptions,
                    startTest,
                    nextQuestion,
                    prevQuestion,
                    finishTest,
                    restartTest
                }
            }
        }).mount('#app')
    </script>
</body>
</html>
