
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <title>ç»´æ–¯ç‰¹æ´›æ±Ÿæµ™æ²ªåœ°å›¾ - æƒåŠ›æ¸¸æˆç‰ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=MedievalSharp&display=swap');
        body, html {
            font-family: 'MedievalSharp', cursive;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        .float {
            animation: float 3s ease-in-out infinite;
        }
        .got-bg {
            background: linear-gradient(135deg, #2C3E50, #34495E, #2C3E50);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
        }
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .parchment {
            background-color: #F4E6CC;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            border: 2px solid #8B4513;
        }
    </style>
    <script type="text/javascript" src="https://webapi.amap.com/maps?v=2.0&key=48a04284f106bb75500387301fa56eda"></script>
</head>
<body class="bg-gray-900 text-gray-200">
    <div id="container" class="w-full h-screen"></div>
    <div id="stylePanel" class="absolute top-4 left-4 z-50 got-bg text-gray-300 rounded-lg shadow-lg p-4 w-64 fade-in text-sm">
        <h2 class="text-lg font-bold mb-4 text-yellow-500">ç‹å›½é£æ ¼</h2>
        <select id="mapStyleSelect" class="w-full p-2 mb-2 border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 bg-gray-800 text-gray-300">
            <option value="amap://styles/normal">ç»´æ–¯ç‰¹æ´›</option>
            <option value="amap://styles/dark" selected>é•¿å¤œ</option>
            <option value="amap://styles/light">ç™½æ˜¼</option>
            <option value="amap://styles/whitesmoke">å‡›å†¬</option>
            <option value="amap://styles/fresh">æ²³é—´åœ°</option>
            <option value="amap://styles/grey">é“ç¾¤å²›</option>
            <option value="amap://styles/blue">æ²³æ¹¾åœ°</option>
            <option value="amap://styles/wine">å¤šæ©</option>
        </select>
    </div>
    <div id="markerPanel" class="absolute top-4 right-4 z-50 got-bg text-gray-300 rounded-lg shadow-lg p-4 w-64 fade-in text-sm">
        <h2 class="text-lg font-bold mb-4 text-yellow-500">æ·»åŠ æ ‡è®°</h2>
        <select id="markerTypeSelect" class="w-full p-2 mb-4 border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 bg-gray-800 text-gray-300">
            <option value="castle">ğŸ° ä¸´å†¬åŸ</option>
            <option value="crystal">ğŸ’ é¾™æ™¶</option>
            <option value="potion">ğŸ§ª é‡ç«</option>
            <option value="wand">ğŸ—¡ï¸ ç“¦é›·åˆ©äºšé’¢å‰‘</option>
            <option value="dragon">ğŸ‰ å·¨é¾™</option>
        </select>
        <button id="addMarker" class="w-full bg-yellow-600 hover:bg-yellow-700 text-gray-900 font-bold py-2 px-4 rounded-md transition duration-300 ease-in-out mb-2">
            æ”¾ç½®æ ‡è®°
        </button>
        <button id="clearMarkers" class="w-full bg-red-700 hover:bg-red-800 text-gray-200 font-bold py-2 px-4 rounded-md transition duration-300 ease-in-out">
            æ¸…é™¤æ ‡è®°
        </button>
    </div>
    <script>
        var map = new AMap.Map('container', {
            zoom: 7,
            center: [120.5, 30.5],
            viewMode: '3D',
            mapStyle: 'amap://styles/dark'
        });

        var districtCodes = ['310000', '320000', '330000'];
        var districtPolygons = [];

        function updateDistrictColors() {
            var strokeColor, fillColor;
            switch(map.getMapStyle()) {
                case 'amap://styles/dark':
                    strokeColor = '#FFD700';
                    fillColor = '#B8860B';
                    break;
                case 'amap://styles/light':
                    strokeColor = '#8B4513';
                    fillColor = '#DEB887';
                    break;
                case 'amap://styles/whitesmoke':
                    strokeColor = '#4682B4';
                    fillColor = '#B0C4DE';
                    break;
                case 'amap://styles/fresh':
                    strokeColor = '#228B22';
                    fillColor = '#32CD32';
                    break;
                case 'amap://styles/grey':
                    strokeColor = '#2F4F4F';
                    fillColor = '#708090';
                    break;
                case 'amap://styles/blue':
                    strokeColor = '#00008B';
                    fillColor = '#4169E1';
                    break;
                case 'amap://styles/wine':
                    strokeColor = '#8B0000';
                    fillColor = '#DC143C';
                    break;
                default:
                    strokeColor = '#CD853F';
                    fillColor = '#DEB887';
            }
            districtPolygons.forEach(polygon => {
                polygon.setOptions({
                    strokeColor: strokeColor,
                    fillColor: fillColor
                });
            });
        }

        AMap.plugin('AMap.DistrictSearch', function() {
            var districtSearch = new AMap.DistrictSearch({
                level: 'province',
                subdistrict: 0
            });

            districtCodes.forEach(function(code) {
                districtSearch.search(code, function(status, result) {
                    if (status === 'complete') {
                        var bounds = result.districtList[0].boundaries;
                        var polygon = new AMap.Polygon({
                            path: bounds,
                            strokeColor: '#CD853F',
                            strokeWeight: 2,
                            strokeOpacity: 0.8,
                            fillOpacity: 0.2,
                            fillColor: '#DEB887',
                            zIndex: 50,
                        });
                        map.add(polygon);
                        districtPolygons.push(polygon);
                    }
                });
            });
        });

        AMap.plugin('AMap.Scale', function() {
            var scale = new AMap.Scale();
            map.addControl(scale);
        });

        var markers = [];
        var addMarkerMode = false;

        var markerEmojis = {
            castle: 'ğŸ°',
            crystal: 'ğŸ’',
            potion: 'ğŸ§ª',
            wand: 'ğŸ—¡ï¸',
            dragon: 'ğŸ‰'
        };

        var markerDescriptions = {
            castle: "ä¸´å†¬åŸï¼Œå²å¡”å…‹å®¶æ—çš„ç¥–ä¼ åŸå ¡ï¼Œåè½äºåŒ—å¢ƒçš„ä¸­å¿ƒã€‚è¿™åº§å·å³¨çš„è¦å¡ç”±ä¸¤é“åŸå¢™å’Œä¸€é“æŠ¤åŸæ²³ç¯ç»•ï¼Œæ˜¯æŠµå¾¡å‡›å†¬å’Œå¼‚é¬¼çš„æœ€åé˜²çº¿ã€‚åŸå†…æœ‰ç€æ¸©æ³‰æ°´ç³»ç»Ÿï¼Œå³ä½¿åœ¨æœ€å¯’å†·çš„å†¬å¤©ä¹Ÿèƒ½ä¿æŒæ¸©æš–ã€‚",
            crystal: "é¾™æ™¶ï¼Œåˆç§°é¾™çŸ³ï¼Œæ˜¯ç»´æ–¯ç‰¹æ´›å¤§é™†ä¸Šæœ€çè´µçš„çŸ¿ç‰©ä¹‹ä¸€ã€‚å®ƒä¸ä»…èƒ½å¤Ÿæ€æ­»å¼‚é¬¼ï¼Œè¿˜å¯ä»¥ç”¨æ¥åˆ¶ä½œç“¦é›·åˆ©äºšé’¢ã€‚ä¼ è¯´ä¸­ï¼Œé¾™æ™¶æ˜¯è¿œå¤å·¨é¾™çš„åŒ–çŸ³ï¼Œè•´å«ç€å¼ºå¤§çš„é­”åŠ›ã€‚",
            potion: "é‡ç«ï¼Œç”±ç‚¼é‡‘æœ¯å£«è°ƒåˆ¶çš„é«˜åº¦æ˜“ç‡ƒæ¶²ä½“ï¼Œç‡ƒçƒ§æ—¶å‘ˆç°å‡ºè¯¡å¼‚çš„ç»¿è‰²ç«ç„°ã€‚å®ƒèƒ½åœ¨æ°´ä¸Šç‡ƒçƒ§ï¼Œå¨åŠ›å·¨å¤§ï¼Œæ›¾åœ¨é»‘æ°´æ²³ä¹‹æˆ˜ä¸­å‘æŒ¥å…³é”®ä½œç”¨ã€‚ç„¶è€Œï¼Œå®ƒçš„ä¸ç¨³å®šæ€§ä¹Ÿä½¿å¾—ä½¿ç”¨æ—¶å……æ»¡å±é™©ã€‚",
            wand: "ç“¦é›·åˆ©äºšé’¢å‰‘ï¼Œç”±å¤±è½çš„ç“¦é›·åˆ©äºšæ–‡æ˜é”»é€ è€Œæˆã€‚è¿™ç§å‰‘ä¸ä»…é”‹åˆ©æ— æ¯”ï¼Œæ°¸ä¸å·åˆƒï¼Œè¿˜å¼‚å¸¸è½»ç›ˆã€‚æ¯æŠŠç“¦é›·åˆ©äºšé’¢å‰‘éƒ½æ˜¯æ— ä»·ä¹‹å®ï¼Œå¾€å¾€ä¸–ä»£ç›¸ä¼ ï¼Œæˆä¸ºè´µæ—å®¶æ—çš„è±¡å¾ã€‚",
            dragon: "å·¨é¾™ï¼Œä¼ è¯´ä¸­çš„ç”Ÿç‰©ï¼Œæ›¾ç»ç»Ÿæ²»ç€æ•´ä¸ªä¸–ç•Œçš„å¤©ç©ºã€‚å®ƒä»¬èƒ½å¤Ÿå–·åçƒˆç„°ï¼Œé³ç”²åšä¸å¯æ‘§ã€‚å¦æ ¼åˆ©å®‰å®¶æ—å‡­å€Ÿé©¾é©­å·¨é¾™çš„èƒ½åŠ›ç»Ÿä¸€äº†ä¸ƒå¤§ç‹å›½ã€‚å¦‚ä»Šï¼Œä¸¹å¦®è‰ä¸Â·å¦æ ¼åˆ©å®‰é‡æ–°å­µåŒ–äº†ä¸‰æ¡å¹¼é¾™ï¼Œé¢„ç¤ºç€é¾™ä¹‹æ—¶ä»£çš„å›å½’ã€‚"
        };

        document.getElementById('mapStyleSelect').onchange = function() {
            map.setMapStyle(this.value);
            updateDistrictColors();
        };

        document.getElementById('addMarker').onclick = function() {
            addMarkerMode = !addMarkerMode;
            this.innerHTML = addMarkerMode ? 'ç‚¹å‡»åœ°å›¾æ”¾ç½®' : 'æ”¾ç½®æ ‡è®°';
            this.classList.toggle('bg-yellow-600');
            this.classList.toggle('bg-green-600');
        };

        document.getElementById('clearMarkers').onclick = function() {
            markers.forEach(marker => marker.remove());
            markers = [];
        };

        map.on('click', function(e) {
            if (addMarkerMode) {
                var markerType = document.getElementById('markerTypeSelect').value;
                var marker = new AMap.Marker({
                    position: e.lnglat,
                    content: `<div class="float" style="font-size: 30px;">${markerEmojis[markerType]}</div>`,
                    offset: new AMap.Pixel(-15, -15)
                });

                marker.setMap(map);
                markers.push(marker);

                var infoWindow = new AMap.InfoWindow({
                    content: `<div class="p-2 parchment text-gray-800 rounded-lg">
                        <p class="font-bold text-xl mb-2">${document.getElementById('markerTypeSelect').options[document.getElementById('markerTypeSelect').selectedIndex].text}</p>
                        <p class="text-sm mb-2">åæ ‡ï¼š${e.lnglat.toString()}</p>
                        <p class="text-sm">${markerDescriptions[markerType]}</p>
                    </div>`,
                    offset: new AMap.Pixel(0, -30)
                });

                marker.on('click', function() {
                    infoWindow.open(map, marker.getPosition());
                });

                addMarkerMode = false;
                document.getElementById('addMarker').innerHTML = 'æ”¾ç½®æ ‡è®°';
                document.getElementById('addMarker').classList.remove('bg-green-600');
                document.getElementById('addMarker').classList.add('bg-yellow-600');
            }
        });
    </script>
</body>
</html>
